---
import { Image } from "astro:assets"

const links = [
  { name: 'Inicio', href: '#' },
  { name: 'Servicios', href: '#services' },
  { name: 'Ubicación', href: '#location' },
  { name: 'Contacto', href: '#footer' },
]
---

<nav
  id="navbar"
  class="fixed top-0 z-50 flex w-full items-center justify-between px-4 py-6 transition-all duration-300 md:px-12"
>
  <a href="/" id="nav-logo" class="block transition-transform duration-300 hover:scale-105">
    <Image
      width={100}
      height={100}
      loading="eager"
      fetchpriority="high"
      id="logo-img"
      src="/images/logo.webp"
      alt="Villa Margaritas Logo"
      class="h-24 w-auto object-contain transition-all duration-300"
    />
  </a>

  <ul class="hidden gap-8 md:flex">
    {
      links.map((link) => (
        <li>
          <a
            href={link.href}
            class="nav-link hover:text-primary font-sans text-sm font-medium tracking-widest text-white uppercase transition-colors duration-300"
          >
            {link.name}
          </a>
        </li>
      ))
    }
  </ul>

  <button
    class="bg-primary hover:text-primary hidden cursor-pointer px-8 py-3 font-sans text-xs font-bold tracking-widest text-white uppercase transition-colors duration-300 hover:bg-white md:block"
  >
    Reservar
  </button>

  <!-- Mobile Menu Button (Placeholder) -->
  <button id="mobile-menu-btn" class="text-2xl text-white transition-colors duration-300 md:hidden">
    ☰
  </button>
</nav>

<script>
  const navbar = document.getElementById('navbar')
  const navLogo = document.getElementById('nav-logo')
  const logoImg = document.getElementById('logo-img')
  const navLinks = document.querySelectorAll('.nav-link')
  const mobileMenuBtn = document.getElementById('mobile-menu-btn')

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      navbar?.classList.add('bg-white', 'shadow-md', 'py-4')
      navbar?.classList.remove('py-6')

      // Shrink logo on scroll
      logoImg?.classList.remove('h-24')
      logoImg?.classList.add('h-12')

      mobileMenuBtn?.classList.remove('text-white')
      mobileMenuBtn?.classList.add('text-dark')

      navLinks.forEach((link) => {
        link.classList.remove('text-white')
        link.classList.add('text-dark')
      })
    } else {
      navbar?.classList.remove('bg-white', 'shadow-md', 'py-4')
      navbar?.classList.add('py-6')

      // Restore logo size at top
      logoImg?.classList.add('h-24')
      logoImg?.classList.remove('h-12')

      mobileMenuBtn?.classList.add('text-white')
      mobileMenuBtn?.classList.remove('text-dark')

      navLinks.forEach((link) => {
        link.classList.add('text-white')
        link.classList.remove('text-dark')
      })
    }
  })
</script>
